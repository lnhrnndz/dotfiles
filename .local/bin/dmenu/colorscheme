#!/bin/sh

folder="$HOME/.config/x11/Xresources.d/"
options=$(ls "$folder")

choice=$(echo "$options" | dmenu -i -p "set colorscheme ")

[ -z "$choice" ] && echo "colorscheme: aborting" && exit 1
[ -d "$folder$choice" ] && echo "colorscheme: aborting" && exit 1

echo "changing colorscheme to $choice"
echo "some apps may need to restart"

eval "sed -i 's/#include.*$/#include\ \"\/home\/leon\/.config\/x11\/Xresources.d\/${choice}\"/' ${HOME}/.Xresources"

xrdb "$HOME/.Xresources"

pkill -USR1 st
# TODO: automatically reload dwm colors as well

feh --bg-fill "$HOME/wallpapers/colorschemes/$choice"
