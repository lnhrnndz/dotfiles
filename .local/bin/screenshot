#!/bin/sh

help () {
  echo "Usage: shot [OPTION...]

Options:
 -n NAME      use NAME as filename (must proceed all other options!)
 -a           screenshot all screens
 -s           select area to screenshot with mouse
 -f           screenshot focused window"
}

notify () {
  notify-send "Screenshot taken!"
  echo "screenshot saved as $FILENAME"
}

TIMESTAMP=$(date +%Y-%m-%d_%H%M%S)
FOLDER="$HOME/Pictures/Screenshots/"
FILENAME="$FOLDER$TIMESTAMP.png"

#if echo "$1" | grep -vq "-"; then
#  FILENAME="$FOLDER$1"
#fi
#echo "$FILENAME"

while getopts ":n:hasf" opt; do
  case $opt in
    h) help ;;
    n)
      FILENAME="$FOLDER$OPTARG.png"
      ;;
    a) 
      scrot "$FILENAME" || exit 1
      notify
      ;;
    s)
      echo "drag with left mouse button to select area"
      scrot --select --line mode=edge "$FILENAME" || exit 1
      notify
      ;;
    f)
      scrot --focused "$FILENAME" || exit 1
      notify
      ;;
    \?)
      echo "Invalid option: -$OPTARG" >&2
      exit 1
      ;;
    :)
      echo "Option -$OPTARG requires an argument." >&2
      exit 1
      ;;
  esac
done
