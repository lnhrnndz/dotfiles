#!/bin/sh

options=$(ls "$HOME"/Xresources/)

n="$(echo "$options" | tr -d ' ' | wc -w)"

choice=$(echo "$options" | dmenu -m 0 -l "$n" -bw 4 -p "set colorscheme ")

[ -z "$choice" ] && echo "chcol: aborting" && exit 1
[ ! -e "$HOME/Xresources/$choice" ] && echo "chcol: no such file: $HOME/Xresources/$choice" && exit 1

echo "changing colorscheme to $choice"
echo "some apps may need to restart"

eval "sed -i 's/#include.*$/#include\ \"\/home\/leon\/Xresources\/${choice}\"/' ${HOME}/.Xresources"

xrdb "$HOME/.Xresources"

pkill -USR1 st
